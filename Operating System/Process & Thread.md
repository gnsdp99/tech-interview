> # Process & Thread

#### Q. 스레드

---

스레드는 프로세스를 구성하는 실행 흐름의 단위이다.

즉 하나의 프로세스에는 하나 이상의 스레드가 있다.

각 스레드는 PC(Program Counter)를 포함한 레지스터와 스택의 고유한 자원을 가지고, 프로세스의 스택 영역을 제외한 나머지 메모리 영역을 공유한다.

<br>

#### Q. TCB (Thread Control Block)

---

프로세스와 마찬가지로 스레드 또한 스레드 정보를 저장하는 TCB라는 자료구조를 가진다.

![TCB](/images/tcb.png)

TCB는 스레드와 함께 생성되고 소멸된다.

스레드 간의 자원 공유와 동기화도 TCB로 관리한다.

<br>

#### Q. 멀티 프로세스와 멀티 스레드

---

> 멀티 프로세스 : 동일한 작업을 수행하는 단일 스레드 프로세스를 여러 개 실행하는 것
>
> 멀티 스레드 : 하나의 프로세스를 여러 스레드로 실행하는 것

![멀티 프로세스 vs. 멀티 스레드](/images/multiprocess_vs_multithread.png)

프로세스는 서로 자원을 공유하지 않지만, 같은 프로세스 내의 스레드는 프로세스의 코드, 데이터, 힙 영역을 공유한다.

멀티 프로세스의 특징

- 하나의 프로세스가 죽어도 다른 프로세스에 영향을 주지 않으므로 안정성이 높다.

- 하지만 멀티 스레드보다 많은 메모리 공간과 CPU 자원을 차지하는 단점이 있다.

- 독립된 메모리 영역을 사용하기 때문에 컨텍스트 스위칭 오버헤드가 크다.

멀티 스레드의 특징

- 프로세스 간의 통신보다 스레드 간의 통신 비용이 적다.

- 프로세스를 생성하여 자원을 할당하는 시스템 콜 호출이 적기 때문에 더 효율적이다.

- 하지만 스레드 간에 자원을 공유하기 때문에 동기화 문제가 발생할 수 있다.

<br>

#### Q. 프로세스 컨텍스트 스위칭 vs 스레드 컨텍스트 스위칭

---

- TCB가 PCB보다 가볍다.

  - TCB는 PCB보다 저장하는 데이터가 더 작으므로 더 빨리 읽고 쓸 수 있다.

  - 따라서 스레드 컨텍스트 스위칭이 프로세스 컨텍스트 스위칭보다 빠르다.

- 프로세스 컨텍스트 스위칭은 캐시 메모리를 초기화한다.

  - 프로세스 컨텍스트 스위칭 시 CPU는 프로세스의 독립적인 코드 영역, 데이터 영역을 가져오므로 CPU의 캐시 메모리를 초기화해야 한다.

  - 스레드의 경우도 다른 CPU 코어에서 실행할 때는 캐시 메모리를 초기화해야 한다.

- 스레드 컨텍스트 스위칭은 자원 동기화 문제가 발생한다.

  - 스레드는 힙 영역을 공유하기 때문에 두 스레드가 같은 자원에 접근할 때 동기화 문제가 발생할 수 있다.

  - 프로세스의 경우도 IPC와 같이 공유 자원을 사용하면 동기화 문제가 발생할 수 있다.

<br>

> 참조
>
> - 혼자 공부하는 컴퓨터 구조+운영체제 (강민철)
> - [멀티 프로세스(Multi Process)와 멀티 스레드(Multi Thread)](https://wooody92.github.io/os/%EB%A9%80%ED%8B%B0-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80-%EB%A9%80%ED%8B%B0-%EC%8A%A4%EB%A0%88%EB%93%9C/)
> - [완전히 정복하는 프로세스 vs 스레드 개념](https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%E2%9A%94%EF%B8%8F-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%B0%A8%EC%9D%B4?pidx=20)
